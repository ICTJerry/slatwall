{"version":3,"names":[],"mappings":"","sources":["directives/common/swpaginationbar.js"],"sourcesContent":["angular.module('slatwalladmin').directive('swPaginationBar', [\n    '$log',\n    '$timeout',\n    'partialsPath',\n    'paginationService',\n    function ($log, $timeout, partialsPath, paginationService) {\n        return {\n            restrict: 'A',\n            templateUrl: partialsPath + 'paginationbar.html',\n            scope: {\n                pageShow: \"=\",\n                currentPage: \"=\",\n                pageStart: \"&\",\n                pageEnd: \"&\",\n                recordsCount: \"&\",\n                collection: \"=\",\n                autoScroll: \"=\",\n                getCollection: \"&\"\n            },\n            link: function (scope, element, attrs) {\n                $log.debug('pagination init');\n                scope.totalPagesArray = [];\n                scope.hasPrevious = paginationService.hasPrevious;\n                scope.hasNext = paginationService.hasNext;\n                scope.totalPages = paginationService.getTotalPages;\n                scope.pageShowOptions = paginationService.getPageShowOptions();\n                scope.pageShowOptions.selectedPageShowOption = scope.pageShowOptions[0];\n                scope.pageShowOptionChanged = function (pageShowOption) {\n                    $log.debug('pageShowOptionChanged');\n                    $log.debug(pageShowOption);\n                    paginationService.setPageShow(pageShowOption.value);\n                    scope.pageShow = paginationService.getPageShow();\n                    scope.currentPage = 1;\n                    scope.setCurrentPage(1);\n                };\n                /*var unbindPageOptionsWatchListener = scope.$watch('pageOptions',function(newValue,oldValue){\n                     $(\"select\").selectBoxIt();\n                     unbindPageOptionsWatchListener();\n                });*/\n                scope.setCurrentPage = function (number) {\n                    $log.debug('setCurrentPage');\n                    paginationService.setCurrentPage(number);\n                    scope.currentPage = number;\n                    $timeout(function () {\n                        scope.getCollection();\n                    });\n                };\n                var setPageRecordsInfo = function (recordsCount, pageStart, pageEnd, totalPages) {\n                    paginationService.setRecordsCount(recordsCount);\n                    if (paginationService.getRecordsCount() === 0) {\n                        paginationService.setPageStart(0);\n                    }\n                    else {\n                        paginationService.setPageStart(pageStart);\n                    }\n                    paginationService.setPageEnd(pageEnd);\n                    paginationService.setTotalPages(totalPages);\n                };\n                scope.$watch('collection', function (newValue, oldValue) {\n                    $log.debug('collection changed');\n                    $log.debug(newValue);\n                    if (angular.isDefined(newValue)) {\n                        setPageRecordsInfo(newValue.recordsCount, newValue.pageRecordsStart, newValue.pageRecordsEnd, newValue.totalPages);\n                        scope.currentPage = paginationService.getCurrentPage();\n                        scope.pageShow = paginationService.getPageShow();\n                        //scope.totalPages()\n                        scope.totalPagesArray = [];\n                        for (var i = 0; i < scope.totalPages(); i++) {\n                            scope.totalPagesArray.push(i + 1);\n                        }\n                        scope.pageStart();\n                        scope.pageEnd();\n                        scope.recordsCount();\n                        scope.hasPrevious();\n                        scope.hasNext();\n                    }\n                });\n                scope.showPreviousJump = function () {\n                    if (angular.isDefined(scope.currentPage) && scope.currentPage > 3) {\n                        scope.totalPagesArray = [];\n                        for (var i = 0; i < scope.totalPages(); i++) {\n                            if (scope.currentPage < 7 && scope.currentPage > 3) {\n                                if (i !== 0) {\n                                    scope.totalPagesArray.push(i + 1);\n                                }\n                            }\n                            else {\n                                scope.totalPagesArray.push(i + 1);\n                            }\n                        }\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                };\n                scope.showNextJump = function () {\n                    if (scope.currentPage < paginationService.getTotalPages() - 3 && paginationService.getTotalPages() > 6) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                };\n                scope.previousJump = function () {\n                    paginationService.setCurrentPage(scope.currentPage - 3);\n                    scope.currentPage -= 3;\n                };\n                scope.nextJump = function () {\n                    paginationService.setCurrentPage(scope.currentPage + 3);\n                    scope.currentPage += 3;\n                };\n                scope.showPageNumber = function (number) {\n                    /*if(scope.currentPage >= scope.totalPages() - 3){\n                        if(number > scope.totalPages() - 6){\n                            return true;\n                        }\n                    }*/\n                    if (scope.currentPage >= scope.totalPages() - 3) {\n                        if (number > scope.totalPages() - 6) {\n                            return true;\n                        }\n                    }\n                    if (scope.currentPage <= 3) {\n                        if (number < 6) {\n                            return true;\n                        }\n                    }\n                    else {\n                        var bottomRange = scope.currentPage - 2;\n                        var topRange = scope.currentPage + 2;\n                        if (number > bottomRange && number < topRange) {\n                            return true;\n                        }\n                    }\n                    return false;\n                };\n                scope.previousPage = function () {\n                    paginationService.previousPage();\n                    scope.currentPage = paginationService.getCurrentPage();\n                };\n                scope.nextPage = function () {\n                    paginationService.nextPage();\n                    scope.currentPage = paginationService.getCurrentPage();\n                };\n            }\n        };\n    }\n]);\n\n//# sourceMappingURL=../../directives/common/swpaginationbar.js.map"],"file":"directives/common/swpaginationbar.js","sourceRoot":"/source/"}